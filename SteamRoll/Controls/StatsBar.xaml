<UserControl x:Class="SteamRoll.Controls.StatsBar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:SteamRoll.Controls"
             mc:Ignorable="d"
             d:DesignHeight="70" d:DesignWidth="1200">
    <Border Background="{DynamicResource BackgroundDarkBrush}"
            BorderBrush="{DynamicResource BorderSubtleBrush}" BorderThickness="0,0,0,1" Padding="32,16">

        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Games Count -->
            <Border Grid.Column="0" Background="{DynamicResource BackgroundLightBrush}"
                    CornerRadius="8" Padding="16,10" Margin="0,0,16,0">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="ðŸ“š" FontSize="18" Margin="0,0,10,0" VerticalAlignment="Center"
                               FontFamily="Segoe UI Emoji" Foreground="{DynamicResource TextSecondaryBrush}"/>
                    <StackPanel>
                        <TextBlock x:Name="TotalGamesText" Text="0" FontSize="20" FontWeight="Bold"
                                   Foreground="{DynamicResource TextPrimaryBrush}"/>
                        <TextBlock Text="Games" FontSize="11" Foreground="{DynamicResource TextMutedBrush}"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Packageable Count -->
            <Border Grid.Column="1" Background="{DynamicResource BackgroundLightBrush}"
                    CornerRadius="8" Padding="16,10" Margin="0,0,16,0">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="âœ“" FontSize="18" Foreground="{DynamicResource SuccessBrush}"
                               Margin="0,0,10,0" VerticalAlignment="Center"/>
                    <StackPanel>
                        <TextBlock x:Name="PackageableText" Text="0" FontSize="20" FontWeight="Bold"
                                   Foreground="{DynamicResource SuccessBrush}"/>
                        <TextBlock Text="Packageable" FontSize="11" Foreground="{DynamicResource TextMutedBrush}"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Total Size -->
            <Border Grid.Column="2" Background="{DynamicResource BackgroundLightBrush}"
                    CornerRadius="8" Padding="16,10">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="ðŸ’¾" FontSize="18" Margin="0,0,10,0" VerticalAlignment="Center"
                               FontFamily="Segoe UI Emoji" Foreground="{DynamicResource TextSecondaryBrush}"/>
                    <StackPanel>
                        <TextBlock x:Name="TotalSizeText" Text="0 GB" FontSize="20" FontWeight="Bold"
                                   Foreground="{DynamicResource TextPrimaryBrush}"/>
                        <TextBlock Text="Total Size" FontSize="11" Foreground="{DynamicResource TextMutedBrush}"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Network Status (visually distinct from static stats) -->
            <StackPanel Grid.Column="3" Orientation="Horizontal" VerticalAlignment="Center" Margin="16,0,0,0">
                <TextBlock x:Name="NetworkStatusText" Text="Searching for peers" FontSize="13"
                           FontWeight="Normal"
                           Foreground="{DynamicResource TextSecondaryBrush}" VerticalAlignment="Center"/>
                <TextBlock x:Name="NetworkStatusDots" Text="..." FontSize="13"
                           FontWeight="Normal"
                           Foreground="{DynamicResource TextSecondaryBrush}" VerticalAlignment="Center"/>
            </StackPanel>

            <!-- Sort Box -->
            <ComboBox Grid.Column="4" x:Name="SortBox" Width="140" Margin="0,0,16,0"
                      SelectionChanged="SortBox_SelectionChanged"
                      Style="{DynamicResource ComboBoxStyle}" VerticalAlignment="Center">
                <ComboBoxItem Content="Name (A-Z)" Tag="Name"/>
                <ComboBoxItem Content="Size (Largest)" Tag="Size"/>
                <ComboBoxItem Content="Last Played" Tag="LastPlayed"/>
                <ComboBoxItem Content="Review Score" Tag="ReviewScore"/>
                <ComboBoxItem Content="Release Date" Tag="ReleaseDate"/>
            </ComboBox>

            <!-- Filter Buttons (pill-style chips) -->
            <StackPanel Grid.Column="5" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,16,0">
                <ToggleButton x:Name="FilterFavoritesBtn" Click="FilterFavorites_Click"
                              ToolTip="Show favorites"
                              Background="#1A27272A" BorderThickness="0" Padding="12,6" Margin="0,0,6,0" Cursor="Hand">
                     <ToggleButton.Template>
                        <ControlTemplate TargetType="ToggleButton">
                            <Border x:Name="border" Background="{TemplateBinding Background}"
                                    CornerRadius="14" Padding="{TemplateBinding Padding}"
                                    BorderBrush="#3F3F46" BorderThickness="1">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsChecked" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="#DA3633"/>
                                    <Setter TargetName="border" Property="BorderBrush" Value="#DA3633"/>
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="#2A2A2E"/>
                                    <Setter TargetName="border" Property="BorderBrush" Value="#52525B"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </ToggleButton.Template>
                    <TextBlock Text="â¤ï¸ Favorites" FontSize="11" FontFamily="Segoe UI Emoji" Foreground="{DynamicResource TextSecondaryBrush}"/>
                </ToggleButton>

                <ToggleButton x:Name="FilterReadyBtn" Click="FilterReady_Click"
                              ToolTip="Show only games ready to package"
                              Background="#1A27272A" BorderThickness="0" Padding="12,6" Margin="0,0,6,0" Cursor="Hand">
                    <ToggleButton.Template>
                        <ControlTemplate TargetType="ToggleButton">
                            <Border x:Name="border" Background="{TemplateBinding Background}"
                                    CornerRadius="14" Padding="{TemplateBinding Padding}"
                                    BorderBrush="#3F3F46" BorderThickness="1">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsChecked" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="#238636"/>
                                    <Setter TargetName="border" Property="BorderBrush" Value="#238636"/>
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="#2A2A2E"/>
                                    <Setter TargetName="border" Property="BorderBrush" Value="#52525B"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </ToggleButton.Template>
                    <TextBlock Text="âœ“ Ready" FontSize="11" Foreground="{DynamicResource TextSecondaryBrush}"/>
                </ToggleButton>

                <ToggleButton x:Name="FilterPackagedBtn" Click="FilterPackaged_Click"
                              ToolTip="Show only packaged games"
                              Background="#1A27272A" BorderThickness="0" Padding="12,6" Margin="0,0,6,0" Cursor="Hand">
                    <ToggleButton.Template>
                        <ControlTemplate TargetType="ToggleButton">
                            <Border x:Name="border" Background="{TemplateBinding Background}"
                                    CornerRadius="14" Padding="{TemplateBinding Padding}"
                                    BorderBrush="#3F3F46" BorderThickness="1">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsChecked" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="#0D9488"/>
                                    <Setter TargetName="border" Property="BorderBrush" Value="#0D9488"/>
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="#2A2A2E"/>
                                    <Setter TargetName="border" Property="BorderBrush" Value="#52525B"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </ToggleButton.Template>
                    <TextBlock Text="ðŸ“¦ Packaged" FontSize="11" FontFamily="Segoe UI Emoji" Foreground="{DynamicResource TextSecondaryBrush}"/>
                </ToggleButton>

                <ToggleButton x:Name="FilterDlcBtn" Click="FilterDlc_Click"
                              ToolTip="Show only games with DLC"
                              Background="#1A27272A" BorderThickness="0" Padding="12,6" Margin="0,0,6,0" Cursor="Hand">
                    <ToggleButton.Template>
                        <ControlTemplate TargetType="ToggleButton">
                            <Border x:Name="border" Background="{TemplateBinding Background}"
                                    CornerRadius="14" Padding="{TemplateBinding Padding}"
                                    BorderBrush="#3F3F46" BorderThickness="1">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsChecked" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="#A371F7"/>
                                    <Setter TargetName="border" Property="BorderBrush" Value="#A371F7"/>
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="#2A2A2E"/>
                                    <Setter TargetName="border" Property="BorderBrush" Value="#52525B"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </ToggleButton.Template>
                    <TextBlock Text="ðŸŽ DLC" FontSize="11" FontFamily="Segoe UI Emoji" Foreground="{DynamicResource TextSecondaryBrush}"/>
                </ToggleButton>

                <!-- Update Available Filter -->
                <ToggleButton x:Name="FilterUpdateBtn" Click="FilterUpdate_Click"
                              ToolTip="Show games with updates available (package outdated)"
                              Background="#1A27272A" BorderThickness="0" Padding="12,6" Cursor="Hand">
                    <ToggleButton.Template>
                        <ControlTemplate TargetType="ToggleButton">
                            <Border x:Name="border" Background="{TemplateBinding Background}"
                                    CornerRadius="14" Padding="{TemplateBinding Padding}"
                                    BorderBrush="#3F3F46" BorderThickness="1">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsChecked" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="#D29922"/>
                                    <Setter TargetName="border" Property="BorderBrush" Value="#D29922"/>
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="#2A2A2E"/>
                                    <Setter TargetName="border" Property="BorderBrush" Value="#52525B"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </ToggleButton.Template>
                    <TextBlock Text="ðŸ”„ Updates" FontSize="11" FontFamily="Segoe UI Emoji" Foreground="{DynamicResource TextSecondaryBrush}"/>
                </ToggleButton>
            </StackPanel>
        </Grid>
    </Border>
</UserControl>
